<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>B√†i 7: H·ªá Tr·ª•c T·ªça ƒê·ªô Oxyz (Final v11 - Quiz Extra Small)</title>
    
    <script>
    window.MathJax = {
      tex: { inlineMath: [['$', '$'], ['\\(', '\\)']] },
      svg: { fontCache: 'global' }
    };
    </script>
    
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>

    <style>
        body { 
            font-family: 'Times New Roman', serif;
            background-color: #0f172a; 
            color: #334155; 
            overflow: hidden; 
            margin: 0; padding: 0;
            height: 100vh; width: 100vw;
            overscroll-behavior: none;
        }
        
        #main-container { width: 100%; height: 100%; display: flex; justify-content: center; align-items: center; padding: 10px; }
        #slide-deck { width: 100%; height: 100%; max-width: 1400px; background: white; border-radius: 12px; box-shadow: 0 10px 25px rgba(0,0,0,0.5); display: flex; flex-direction: column; overflow: hidden; position: relative; }
        .slide-header { height: 50px; flex-shrink: 0; background: #1e293b; color: white; display: flex; align-items: center; justify-content: space-between; padding: 0 15px; font-family: 'Segoe UI', sans-serif; font-weight: bold; border-bottom: 4px solid #3b82f6; z-index: 10; }
        .slide-content { flex: 1; display: none; flex-direction: row; height: calc(100% - 50px); overflow: hidden; position: relative; }
        .slide-content.active { display: flex; animation: fadeIn 0.3s ease-out; }
        .slide-full { width: 100%; height: 100%; padding: 20px; overflow-y: auto; font-family: 'Segoe UI', sans-serif; }
        .slide-split .left { width: 40%; height: 100%; padding: 20px; overflow-y: auto; border-right: 1px solid #e2e8f0; background: #fff; order: 1; font-family: 'Segoe UI', sans-serif; }
        .slide-split .right { width: 60%; height: 100%; position: relative; background: radial-gradient(circle, #f8fafc 0%, #cbd5e1 100%); order: 2; cursor: move; display: flex; justify-content: center; align-items: center; }
        .nav-btn { position: absolute; bottom: 20px; padding: 10px 20px; border-radius: 8px; font-weight: bold; font-family: 'Segoe UI', sans-serif; border: none; cursor: pointer; transition: all 0.2s; z-index: 50; box-shadow: 0 4px 10px rgba(0,0,0,0.2); }
        .btn-prev { left: 20px; background: #cbd5e1; color: #334155; }
        .btn-prev:hover { background: #94a3b8; }
        .btn-next { right: 20px; background: #3b82f6; color: white; }
        .btn-next:hover { background: #2563eb; }
        .highlight-box { background: #eff6ff; border-left: 4px solid #3b82f6; padding: 10px; margin: 10px 0; border-radius: 4px; font-size: 0.95rem; }
        .quiz-btn { display: block; width: 100%; text-align: left; padding: 12px; margin-bottom: 8px; background: white; border: 1px solid #cbd5e1; border-radius: 8px; font-size: 0.95rem; cursor: pointer; transition: all 0.2s; touch-action: manipulation; }
        .quiz-btn:active { transform: scale(0.98); }
        .quiz-btn.correct { background: #dcfce7; border-color: #22c55e; color: #166534; font-weight: bold; }
        .quiz-btn.wrong { background: #fee2e2; border-color: #ef4444; color: #991b1b; }

        @media (max-width: 768px) {
            #main-container { padding: 0; }
            #slide-deck { border-radius: 0; }
            .slide-header { font-size: 0.9rem; padding: 0 10px; }
            .slide-content.slide-split { flex-direction: column; }
            .slide-split .right { width: 100%; height: 45%; order: 1; border-bottom: 1px solid #cbd5e1; }
            .slide-split .left { width: 100%; height: 55%; order: 2; padding: 15px 15px 80px 15px; }
            .nav-btn { bottom: 80px; padding: 12px 18px; opacity: 0.9; }
            .btn-prev { left: 15px; }
            .btn-next { right: 15px; }
        }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        svg text { font-family: 'Times New Roman', serif; user-select: none; pointer-events: none; }
    </style>
</head>
<body>

<div id="main-container">
    <div id="slide-deck">
        <div class="slide-header">
            <span class="truncate">H·ªÜ TR·ª§C T·ªåA ƒê·ªò OXYZ</span>
            <span id="slide-indicator" class="text-xs font-normal text-gray-300 ml-2 whitespace-nowrap">Slide 1/11</span>
        </div>

        <div class="slide-content active" id="slide-0">
            <div class="slide-full flex flex-col items-center justify-center text-center bg-slate-900 text-white">
                <h1 class="text-4xl md:text-5xl font-bold mb-4 text-blue-400">H·ªÜ TR·ª§C TO·∫† ƒê·ªò<br>TRONG KH√îNG GIAN</h1>
                <p class="text-lg text-slate-400">To√°n H√¨nh H·ªçc 12</p>
                <div class="mt-6 px-4 py-1 border border-slate-600 rounded-full text-sm">GV: L√ä TH·ªä D√ÇN AN</div>
            </div>
        </div>

        <div class="slide-content" id="slide-1">
            <div class="slide-full">
                <h2 class="text-2xl font-bold text-slate-800 border-b-2 border-blue-500 inline-block mb-4">I. M·ª§C TI√äU</h2>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div class="bg-white p-4 rounded-lg shadow border-t-4 border-blue-500">
                        <h3 class="font-bold text-blue-700 mb-2">Ki·∫øn Th·ª©c</h3>
                        <ul class="list-disc pl-5 space-y-1 text-sm md:text-base">
                            <li>Nh·∫≠n bi·∫øt h·ªá tr·ª•c $Oxyz$.</li>
                            <li>X√°c ƒë·ªãnh t·ªça ƒë·ªô ƒëi·ªÉm, vect∆°.</li>
                        </ul>
                    </div>
                    <div class="bg-white p-4 rounded-lg shadow border-t-4 border-green-500">
                        <h3 class="font-bold text-green-700 mb-2">NƒÉng L·ª±c</h3>
                        <ul class="list-disc pl-5 space-y-1 text-sm md:text-base">
                            <li>T∆∞ duy h√¨nh h·ªçc kh√¥ng gian.</li>
                            <li>Quan s√°t h√¨nh bi·ªÉu di·ªÖn.</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>

        <div class="slide-content slide-split" id="slide-2">
            <div class="left">
                <h2 class="text-xl font-bold text-blue-700 mb-2">1. H·ªá tr·ª•c Oxyz</h2>
                <div class="highlight-box">
                    <p>Ba tr·ª•c $Ox, Oy, Oz$ vu√¥ng g√≥c nhau t·∫°i $O$.</p>
                    <ul class="mt-1 list-disc pl-4 text-sm">
                        <li>$O$: G·ªëc t·ªça ƒë·ªô (0;0;0).</li>
                        <li>$\vec{i}, \vec{j}, \vec{k}$: Vect∆° ƒë∆°n v·ªã.</li>
                    </ul>
                </div>
                <p class="text-sm text-slate-500">K√©o h√¨nh b√™n ƒë·ªÉ xoay 3D.</p>
            </div>
            <div class="right" id="viz-theory-1"></div>
        </div>

        <div class="slide-content slide-split" id="slide-3">
            <div class="left">
                <h2 class="text-xl font-bold text-blue-700 mb-2">2. T·ªça ƒë·ªô ƒëi·ªÉm</h2>
                <div class="highlight-box text-center">
                    <p class="font-bold">$\vec{OM} = x\vec{i} + y\vec{j} + z\vec{k}$</p>
                    <p>$\Leftrightarrow M(x; y; z)$</p>
                </div>
                <p class="text-sm italic text-slate-500 mt-2">V√≠ d·ª•: $\vec{OM} = 2\vec{i} + \vec{k} \Rightarrow M(2; 0; 1)$.</p>
            </div>
            <div class="right" id="viz-theory-2"></div>
        </div>

        <div class="slide-content slide-split" id="slide-4">
            <div class="left">
                <div class="bg-blue-600 text-white px-2 py-0.5 inline-block rounded text-xs mb-1">Tr·∫Øc nghi·ªám</div>
                <h2 class="text-lg font-bold text-slate-800">C√¢u 1</h2>
                <p class="text-sm mb-2">K√≠ch th∆∞·ªõc h√¨nh h·ªôp: $Ox=2, Oy=4, Oz=3$.</p>
                <div class="highlight-box"><p>T·ªça ƒë·ªô ƒëi·ªÉm $A$ l√†: </p></div>
                <div class="options">
                    <button class="quiz-btn" onclick="checkAnswer(this, false)">A. $(1; 1; 1)$</button>
                    <button class="quiz-btn" onclick="checkAnswer(this, true)">B. $(0; 0; 0)$</button>
                    <button class="quiz-btn" onclick="checkAnswer(this, false)">C. $(0; 0; 1)$</button>
                </div>
            </div>
            <div class="right" id="viz-q1"></div>
        </div>

        <div class="slide-content slide-split" id="slide-5">
            <div class="left">
                <h2 class="text-lg font-bold text-slate-800">C√¢u 2</h2>
                <div class="highlight-box"><p>T√¨m t·ªça ƒë·ªô ƒëi·ªÉm $B$ l√†: </p></div>
                <div class="options">
                    <button class="quiz-btn" onclick="checkAnswer(this, false)">A. $(4; 0; 0)$</button>
                    <button class="quiz-btn" onclick="checkAnswer(this, true)">B. $(0; 4; 0)$</button>
                    <button class="quiz-btn" onclick="checkAnswer(this, false)">C. $(0; 0; 4)$</button>
                </div>
            </div>
            <div class="right" id="viz-q2"></div>
        </div>

        <div class="slide-content slide-split" id="slide-6">
            <div class="left">
                <h2 class="text-lg font-bold text-slate-800">C√¢u 3</h2>
                <div class="highlight-box"><p>T√¨m t·ªça ƒë·ªô ƒëi·ªÉm $A'$ l√†: </p></div>
                <div class="options">
                    <button class="quiz-btn" onclick="checkAnswer(this, true)">A. $(0; 0; 3)$</button>
                    <button class="quiz-btn" onclick="checkAnswer(this, false)">B. $(3; 0; 0)$</button>
                    <button class="quiz-btn" onclick="checkAnswer(this, false)">C. $(0; 3; 0)$</button>
                </div>
            </div>
            <div class="right" id="viz-q3"></div>
        </div>

        <div class="slide-content slide-split" id="slide-7">
            <div class="left">
                <h2 class="text-lg font-bold text-slate-800">C√¢u 4</h2>
                <p class="text-sm mb-2">ƒêi·ªÉm $C$ thu·ªôc m·∫∑t $(Oxy)$ l√†: </p>
                <div class="highlight-box"><p>T·ªça ƒë·ªô ƒëi·ªÉm $C$ l√†?</p></div>
                <div class="options">
                    <button class="quiz-btn" onclick="checkAnswer(this, false)">A. $(2; 4; 3)$</button>
                    <button class="quiz-btn" onclick="checkAnswer(this, true)">B. $(2; 4; 0)$</button>
                    <button class="quiz-btn" onclick="checkAnswer(this, false)">C. $(4; 2; 0)$</button>
                </div>
            </div>
            <div class="right" id="viz-q4"></div>
        </div>

        <div class="slide-content slide-split" id="slide-8">
            <div class="left">
                <h2 class="text-lg font-bold text-slate-800">C√¢u 5</h2>
                <div class="highlight-box"><p>T·ªça ƒë·ªô ƒëi·ªÉm $B'$ l√†: </p></div>
                <div class="options">
                    <button class="quiz-btn" onclick="checkAnswer(this, false)">A. $(0; 3; 4)$</button>
                    <button class="quiz-btn" onclick="checkAnswer(this, true)">B. $(0; 4; 3)$</button>
                    <button class="quiz-btn" onclick="checkAnswer(this, false)">C. $(2; 4; 3)$</button>
                </div>
            </div>
            <div class="right" id="viz-q5"></div>
        </div>

        <div class="slide-content slide-split" id="slide-9">
            <div class="left">
                <h2 class="text-lg font-bold text-slate-800">C√¢u 6</h2>
                <div class="highlight-box"><p>T·ªça ƒë·ªô ƒëi·ªÉm $C'$ (ƒë·ªânh ƒë·ªëi di·ªán $O$).</p></div>
                <div class="options">
                    <button class="quiz-btn" onclick="checkAnswer(this, false)">A. $(2; 4; 0)$</button>
                    <button class="quiz-btn" onclick="checkAnswer(this, false)">B. $(0; 4; 3)$</button>
                    <button class="quiz-btn" onclick="checkAnswer(this, true)">C. $(2; 4; 3)$</button>
                </div>
            </div>
            <div class="right" id="viz-q6"></div>
        </div>

        <div class="slide-content" id="slide-10">
            <div class="slide-full flex flex-col items-center justify-center text-center">
                <h2 class="text-3xl font-bold text-blue-600 mb-4">HO√ÄN TH√ÄNH</h2>
                <p class="text-lg">B√†i t·∫≠p v·ªÅ nh√†: 2.15, 2.16 (SGK).</p>
                <div class="mt-8 text-6xl">üéâ</div>
            </div>
        </div>

        <button class="nav-btn btn-prev" onclick="changeSlide(-1)">‚ùÆ Tr∆∞·ªõc</button>
        <button class="nav-btn btn-next" onclick="changeSlide(1)">Ti·∫øp ‚ùØ</button>

        <div class="absolute top-14 right-4 bg-white/80 p-1.5 rounded text-xs pointer-events-none z-10 text-slate-500 shadow">
            üí° K√©o ƒë·ªÉ xoay 3D
        </div>
    </div>
</div>

<script>
    // --- SETUP ---
    let currentSlide = 0;
    const slides = document.querySelectorAll('.slide-content');
    const totalSlides = slides.length;
    const indicator = document.getElementById('slide-indicator');

    const slideConfig = [
        { type: 'html' },
        { type: 'html' },
        { type: 'theory-axes', targetId: 'viz-theory-1' },
        { type: 'theory-point', targetId: 'viz-theory-2' },
        { type: 'quiz', targetId: 'viz-q1', highlight: 'A' },
        { type: 'quiz', targetId: 'viz-q2', highlight: 'B' },
        { type: 'quiz', targetId: 'viz-q3', highlight: "A'" },
        { type: 'quiz', targetId: 'viz-q4', highlight: 'C' },
        { type: 'quiz', targetId: 'viz-q5', highlight: "B'" },
        { type: 'quiz', targetId: 'viz-q6', highlight: "C'" },
        { type: 'html' }
    ];

    function showSlide(index) {
        slides.forEach((s, i) => {
            s.classList.remove('active');
            if(i === index) s.classList.add('active');
        });
        indicator.innerText = `${index + 1}/${totalSlides}`;
        
        const config = slideConfig[index];
        if (config && config.type !== 'html') {
            const container = document.getElementById(config.targetId);
            container.innerHTML = "";
            if(config.type === 'quiz') renderQuizScene(config.targetId, config.highlight);
            else if (config.type === 'theory-axes') renderAxesScene(config.targetId);
            else if (config.type === 'theory-point') renderPointScene(config.targetId);
        }
        if(window.MathJax) MathJax.typesetPromise();
    }

    function changeSlide(dir) {
        currentSlide += dir;
        if(currentSlide < 0) currentSlide = 0;
        if(currentSlide >= totalSlides - 1) currentSlide = totalSlides - 1;
        showSlide(currentSlide);
    }

    function checkAnswer(btn, isCorrect) {
        const parent = btn.parentElement;
        const siblings = parent.querySelectorAll('.quiz-btn');
        siblings.forEach(b => b.classList.remove('correct', 'wrong'));
        if(isCorrect) btn.classList.add('correct');
        else btn.classList.add('wrong');
    }

    let resizeTimer;
    window.addEventListener('resize', () => {
        clearTimeout(resizeTimer);
        resizeTimer = setTimeout(() => showSlide(currentSlide), 100);
    });

    // --- D3 LOGIC ---
    const vertices = {
        'O': {x:0, y:0, z:0}, 'A': {x:0, y:0, z:0},
        'D': {x:2, y:0, z:0}, 'B': {x:0, y:4, z:0}, 'C': {x:2, y:4, z:0},
        "A'": {x:0, y:0, z:3}, "D'": {x:2, y:0, z:3}, "B'": {x:0, y:4, z:3}, "C'": {x:2, y:4, z:3}
    };

    function createSVG(containerId) {
        const container = document.getElementById(containerId);
        const width = container.clientWidth;
        const height = container.clientHeight;
        const svg = d3.select("#" + containerId).append("svg").attr("width", width).attr("height", height);
        return { svg, width, height };
    }

    function project(p, yaw, pitch, scale) {
        let x = p.x, y = p.y, z = p.z;
        let x_r = x * Math.cos(yaw) + y * Math.sin(yaw);
        let y_r = y * Math.cos(yaw) - x * Math.sin(yaw);
        let sx = (y_r - x_r) * Math.cos(0.5); 
        let sy = -(z) + (y_r + x_r) * Math.sin(0.4 - pitch);
        return { x: sx * scale, y: sy * scale };
    }

    // --- HELPER: DRAW VECTOR WITH MANUAL ARROW ---
    function drawVectorWithArrow(g, p1, p2, color, strokeWidth) {
        g.append("line")
            .attr("x1", p1.x).attr("y1", p1.y)
            .attr("x2", p2.x).attr("y2", p2.y)
            .attr("stroke", color)
            .attr("stroke-width", strokeWidth);

        const angle = Math.atan2(p2.y - p1.y, p2.x - p1.x) * 180 / Math.PI;

        g.append("path")
            .attr("d", "M0,0 L-10,-5 L-10,5 Z") 
            .attr("fill", color)
            .attr("transform", `translate(${p2.x},${p2.y}) rotate(${angle})`);
    }

    // --- HELPER: DRAW TEXT LABELS ---
    function drawLabel(g, p, txt, color, dx=0, dy=0, bold=true) {
        g.append("text").attr("x", p.x + dx).attr("y", p.y + dy).text(txt).attr("fill", color)
            .attr("text-anchor", "middle").attr("dominant-baseline", "middle")
            .style("font-weight", bold ? "bold" : "normal").style("font-size", "14px");
    }

    // --- HELPER: DRAW VECTOR LABEL (TEXT + HAT) ---
    function drawVectorLabel(g, p, txt, color, dx=0, dy=0) {
        const charWidth = 12; 
        const arrowLength = Math.max(20, txt.length * charWidth); 
        const halfLen = arrowLength / 2;
        
        g.append("text")
            .attr("x", p.x + dx).attr("y", p.y + dy)
            .text(txt)
            .attr("fill", color)
            .attr("text-anchor", "middle")
            .attr("dominant-baseline", "middle")
            .style("font-weight", "bold").style("font-size", "18px")
            .style("font-family", "Times New Roman, serif").style("font-style", "italic");
            
        const arrowY = p.y + dy - 18; 
        const cx = p.x + dx;
        const arrowStartX = cx - halfLen;
        const arrowEndX = cx + halfLen;

        // Manual Arrow Path for Text Hat
        g.append("path")
            .attr("d", `M${arrowStartX},${arrowY} L${arrowEndX},${arrowY} l-6,-6 m6,6 l-6,6`)
            .attr("stroke", color)
            .attr("stroke-width", 2.5) 
            .attr("fill", "none")
            .attr("stroke-linecap", "round")
            .attr("stroke-linejoin", "round");
    }

    function drawLineSimple(g, p1, p2, color, w, dash) {
        const l = g.append("line").attr("x1", p1.x).attr("y1", p1.y).attr("x2", p2.x).attr("y2", p2.y)
            .attr("stroke", color).attr("stroke-width", w);
        if(dash) l.attr("stroke-dasharray", dash);
    }

    function setupDrag(svg, callback) {
        svg.call(d3.drag().on("drag", (e) => callback(e.dx * 0.01, e.dy * 0.01)));
    }


    // --- SCENE RENDERERS ---

    // 1. QUIZ - SCALED DOWN EXTRA 25% (Total 0.6 factor)
    function renderQuizScene(containerId, highlightLabel) {
        const { svg, width, height } = createSVG(containerId);
        // *** CHANGED FROM 0.8 TO 0.6 ***
        let scale = (Math.min(width, height) / 5.5) * 0.6; 
        const g = svg.append("g").attr("transform", `translate(${width/2}, ${height/1.6})`);
        let yaw = -0.5, pitch = -0.2;

        function draw() {
            g.selectAll("*").remove();
            const p = {};
            for(let key in vertices) p[key] = project(vertices[key], yaw, pitch, scale);
            const origin = p['O'];

            // 1. Axes
            const ax = project({x:5, y:0, z:0}, yaw, pitch, scale);
            const ay = project({x:0, y:6, z:0}, yaw, pitch, scale);
            const az = project({x:0, y:0, z:5}, yaw, pitch, scale);
            
            drawVectorWithArrow(g, origin, ax, "#dc2626", 2);
            drawVectorWithArrow(g, origin, ay, "#16a34a", 2);
            drawVectorWithArrow(g, origin, az, "#2563eb", 2);
            
            drawLabel(g, ax, "x", "#dc2626", 15, 0);
            drawLabel(g, ay, "y", "#16a34a", 0, 15);
            drawLabel(g, az, "z", "#2563eb", 0, -15);
            drawLabel(g, origin, "O", "black", -15, 10);

            // 2. Unit Vectors (On Top)
            const i = project({x:1, y:0, z:0}, yaw, pitch, scale);
            const j = project({x:0, y:1, z:0}, yaw, pitch, scale);
            const k = project({x:0, y:0, z:1}, yaw, pitch, scale);

            drawVectorWithArrow(g, origin, i, "#ef4444", 4);
            drawVectorWithArrow(g, origin, j, "#22c55e", 4);
            drawVectorWithArrow(g, origin, k, "#3b82f6", 4);

            drawVectorLabel(g, i, "i", "#dc2626", 0, -15);
            drawVectorLabel(g, j, "j", "#16a34a", 0, -15);
            drawVectorLabel(g, k, "k", "#2563eb", 15, 0);

            // 3. Box
            const edges = [
                ['D', 'C'], ['C', 'B'], 
                ["A'", "D'"], ["D'", "C'"], ["C'", "B'"], ["B'", "A'"],
                ['D', "D'"], ['C', "C'"], ['B', "B'"]
            ];
            edges.forEach(e => drawLineSimple(g, p[e[0]], p[e[1]], "#64748b", 1.5));
            g.append("line").attr("x1", p['A'].x).attr("y1", p['A'].y)
                .attr("x2", p["C'"].x).attr("y2", p["C'"].y)
                .attr("stroke", "#06b6d4").attr("stroke-width", 1.5).attr("stroke-dasharray", "4,4");

            // 4. Points
            for (const [label, coord] of Object.entries(vertices)) {
                if(label === 'O' || label === 'A') continue;
                const pt = p[label];
                const isHighlight = (label === highlightLabel);
                g.append("circle").attr("cx", pt.x).attr("cy", pt.y).attr("r", isHighlight ? 7 : 4)
                    .attr("fill", isHighlight ? "#dc2626" : "#f59e0b").attr("stroke", "white");
                drawLabel(g, pt, label, isHighlight ? "#dc2626" : "#1e293b", 10, -5, isHighlight);
            }

            // 5. Dimensions
            drawLabel(g, {x:(origin.x+p['D'].x)/2, y:(origin.y+p['D'].y)/2+15}, "2", "#b45309");
            drawLabel(g, {x:(origin.x+p['B'].x)/2, y:(origin.y+p['B'].y)/2+15}, "4", "#b45309");
            drawLabel(g, {x:(origin.x+p["A'"].x)/2-10, y:(origin.y+p["A'"].y)/2}, "3", "#b45309");
        }
        draw();
        setupDrag(svg, (dx, dy) => { yaw += dx; pitch += dy; draw(); });
    }

    // 2. THEORY AXES - Remains at 0.8 scale
    function renderAxesScene(containerId) {
        const { svg, width, height } = createSVG(containerId);
        let scale = (Math.min(width, height) / 5) * 0.8;
        const g = svg.append("g").attr("transform", `translate(${width/2}, ${height/1.8})`);
        let yaw = -0.6, pitch = -0.3;

        function draw() {
            g.selectAll("*").remove();
            const origin = {x:0, y:0};
            const px = project({x:3, y:0, z:0}, yaw, pitch, scale);
            const py = project({x:0, y:3, z:0}, yaw, pitch, scale);
            const pz = project({x:0, y:0, z:3}, yaw, pitch, scale);

            // Axes with manual arrows
            drawVectorWithArrow(g, origin, px, "#dc2626", 2);
            drawVectorWithArrow(g, origin, py, "#16a34a", 2);
            drawVectorWithArrow(g, origin, pz, "#2563eb", 2);

            drawLabel(g, px, "x", "#dc2626", 15, 0);
            drawLabel(g, py, "y", "#16a34a", 0, 15);
            drawLabel(g, pz, "z", "#2563eb", 0, -15);
            drawLabel(g, origin, "O", "black", -15, 10);

            const i = project({x:1, y:0, z:0}, yaw, pitch, scale);
            const j = project({x:0, y:1, z:0}, yaw, pitch, scale);
            const k = project({x:0, y:0, z:1}, yaw, pitch, scale);
            
            // Unit Vectors with manual arrows
            drawVectorWithArrow(g, origin, i, "#ef4444", 4);
            drawVectorWithArrow(g, origin, j, "#22c55e", 4);
            drawVectorWithArrow(g, origin, k, "#3b82f6", 4);

            drawVectorLabel(g, i, "i", "#dc2626", 0, -15);
            drawVectorLabel(g, j, "j", "#16a34a", 0, -15);
            drawVectorLabel(g, k, "k", "#2563eb", 15, 0);
        }
        draw();
        setupDrag(svg, (dx, dy) => { yaw += dx; pitch += dy; draw(); });
    }

    // 3. THEORY POINT - Remains at 0.8 scale
    function renderPointScene(containerId) {
        const { svg, width, height } = createSVG(containerId);
        let scale = (Math.min(width, height) / 5.5) * 0.8;
        const g = svg.append("g").attr("transform", `translate(${width/2}, ${height/1.6})`);
        let yaw = -0.5, pitch = -0.2;

        function draw() {
            g.selectAll("*").remove();
            const origin = project({x:0,y:0,z:0}, yaw, pitch, scale);
            
            drawVectorWithArrow(g, origin, project({x:4.5,y:0,z:0}, yaw, pitch, scale), "#cbd5e1", 1.5);
            drawVectorWithArrow(g, origin, project({x:0,y:5,z:0}, yaw, pitch, scale), "#cbd5e1", 1.5);
            drawVectorWithArrow(g, origin, project({x:0,y:0,z:4.5}, yaw, pitch, scale), "#cbd5e1", 1.5);

            const M_data = {x:3, y:3, z:3};
            const M = project(M_data, yaw, pitch, scale);
            const Mx = project({x:3,y:0,z:0}, yaw, pitch, scale);
            const My = project({x:0,y:3,z:0}, yaw, pitch, scale);
            const Mz = project({x:0,y:0,z:3}, yaw, pitch, scale);
            const Mxy = project({x:3,y:3,z:0}, yaw, pitch, scale);

            // Vector OM with Red Arrow
            drawVectorWithArrow(g, origin, M, "#ef4444", 3);

            drawLineSimple(g, Mx, Mxy, "#94a3b8", 1, "3,3");
            drawLineSimple(g, My, Mxy, "#94a3b8", 1, "3,3");
            drawLineSimple(g, Mxy, M, "#94a3b8", 1, "3,3");
            drawLineSimple(g, Mz, M, "#94a3b8", 1, "3,3");
            
            g.append("circle").attr("cx", M.x).attr("cy", M.y).attr("r", 6).attr("fill", "red");
            
            const midOM = {x: (origin.x + M.x)/2, y: (origin.y + M.y)/2};
            drawVectorLabel(g, midOM, "OM", "red", -10, -10);

            drawLabel(g, M, "M(x;y;z)", "black", 15, -10);
            drawLabel(g, origin, "O", "black", -15, 10);
        }
        draw();
        setupDrag(svg, (dx, dy) => { yaw += dx; pitch += dy; draw(); });
    }

    showSlide(0);

</script>
</body>
</html>